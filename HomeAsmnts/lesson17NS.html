<script>
    'use strict';

    let s = "21,4,7,*,+,9,-"
    // функция возвращает индекс следующей  запятой или длину строки  если дальше  запятых  нет
    function getNextTermIndex(str, i) {
        let k;
        i = i + 1;
        for (; i < str.length; i += 1) {
            if (str[i] == ",") {
                k = i;
                return k;
            }
        }
        return str.length;
    }

    console.log(getNextTermIndex(s, 0)) // 2
    console.log(getNextTermIndex(s, 2)) // 4
    console.log(getNextTermIndex(s, 4)) // 6
    console.log(getNextTermIndex(s, 12)) // 14


    function calculate2(str) {
        let o = str + ",";
        let stack = [];
        let firstInd = 0;
        let a;
        let b;
        let c; 

        for (let i=0;  i<o.length; i+=1) {
            if(o[i] == ",")  {
                c  = o.substr(firstInd, (i - firstInd)); 
                if (!isNaN(c))  {
                    stack.push(Number(c));
                } else if (c == "*") {
                a = stack.pop();
                b = stack.pop();
                stack.push(a*b); 
            } else if (c  == "+") {
                a  = stack.pop();
                b = stack.pop();
                stack.push(a+b);
            } else if  (c ==  "-") {
                a  = stack.pop();
                b  =  stack.pop();
                stack.push(b-a);
            }
            firstInd = i + 1;
            }
               
        }
        return stack.pop();

        }


    console.log(calculate2(s)); 

</script>

